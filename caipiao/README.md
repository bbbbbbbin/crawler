# 彩票数据获取以及数据库储存

直接获取彩票数据，并尝试存放在mysql和mongodb数据库中

## 双色球一些规则

双色球按当期销售额的51%、13%和36%分别计提彩票奖金、彩票发行费和彩票公益金。彩票奖金分为当期奖金和调节基金，其中，49%为当期奖金，2%为调节基金

一等奖：当奖池资金低于1亿元时，奖金总额为当期高奖级奖金的75%与奖池中累积的资金之和，单注奖金按注均分，单注最高限额封顶500万元。当奖池资金高于1亿元（含）时，奖金总额包括两部分，一部分为当期高奖级奖金的55%与奖池中累积的资金之和，单注奖金按注均分，单注最高限额封顶500万元；另一部分为当期高奖级奖金的20%，单注奖金按注均分，单注最高限额封顶500万元。

二等奖：奖金总额为当期高奖级奖金的25%，单注奖金按注均分，单注最高限额封顶500万元。

三等奖：单注奖金固定为3000元。

四等奖：单注奖金固定为200元。

五等奖：单注奖金固定为10元。

六等奖：单注奖金固定为5元。

一等奖：投注号码与当期开奖号码全部相同（顺序不限，下同），即中奖；

二等奖：投注号码与当期开奖号码中的6个红色球号码相同，即中奖；

三等奖：投注号码与当期开奖号码中的任意5个红色球号码和1个蓝色球号码相同，即中奖；

四等奖：投注号码与当期开奖号码中的任意5个红色球号码相同，或与任意4个红色球号码和1个蓝色球号码相同，即中奖；

五等奖：投注号码与当期开奖号码中的任意4个红色球号码相同，或与任意3个红色球号码和1个蓝色球号码相同，即中奖；

六等奖：投注号码与当期开奖号码中的1个蓝色球号码相同，即中奖。

双色球投注区分为红色球号码区和蓝色球号码区，红色球号码区由1-33共三十三个号码组成，蓝色球号码区由1-16共十六个号码组成。投注时选择6个红色球号码和1个蓝色球号码组成一注进行单式投注，每注金额人民币2元。

 购买者可选择复式投注。复式投注是指所选号码个数超过单式投注的号码个数，所选号码可组合为每一种单式投注方式的多注彩票的投注。具体规定如下：

（一）红色球号码复式：是指从红色球号码中选择7个号码以上（含7个号码），从蓝色球号码中选择1个号码，组合为多注单式投注号码的投注；

（二）蓝色球号码复式：是指从红色球号码中选择6个号码,从蓝色球号码中选择2个号码以上（含2个号码），组合为多注单式投注号码的投注；

（三）全复式：是指从红色球号码中选择7个号码以上（含7个号码），从蓝色球号码中选择2个号码以上（含2个号码），组合为多注单式投注号码的投注。

购买者可选择胆拖投注。胆拖投注是指选择少于单式投注号码个数的号码作为每注都有的号码作为胆码，再选取除胆码以外的号码作为拖码，由胆码和拖码组合成多注投注，胆拖投注包括两种形式：

(一)单式胆拖：从红色球号码中选择1至5个号码为胆码，再选取除胆码以外的号码作为拖码（胆码和拖码之和必须大于等于7个号码），胆码和拖码组成每6个号码为一组的红色球号码，从蓝色球号码中选择1个号码，蓝色球号码和红色球号码一起组合为多注单式投注号码的投注。

(二)复式胆拖：从红色球号码中选择1至5个号码为胆码，再选取除胆码以外的号码作为拖码（胆码和拖码之和必须大于等于7个号码），胆码和拖码组成每6个号码为一组的红色球号码，从蓝色球号码中选择2个号码以上（含2个号码），蓝色球号码和红色球号码一起组合为多注单式投注号码的投注。

购买者可对其选定的投注号码进行多倍投注，投注倍数范围为2-99倍。单张彩票的投注金额最高不得超过20000元。

## MongoDB

MongoDB 是由C++语言编写的，是一个基于分布式文件存储的开源数据库系统。
在高负载的情况下，添加更多的节点，可以保证服务器性能。
MongoDB 旨在为WEB应用提供可扩展的高性能数据存储解决方案。
MongoDB 将数据存储为一个文档，数据结构由键值(key=>value)对组成。MongoDB 文档类似于 JSON 对象。字段值可以包含其他文档，数组及文档数组。

### CAP定理（CAP theorem）

在计算机科学中, CAP定理（CAP theorem）, 又被称作 布鲁尔定理（Brewer's theorem）, 它指出对于一个分布式计算系统来说，不可能同时满足以下三点:

* 一致性(Consistency) (所有节点在同一时间具有相同的数据)
* 可用性(Availability) (保证每个请求不管成功或者失败都有响应)
* 分隔容忍(Partition tolerance) (系统中任意信息的丢失或失败不会影响系统的继续运作)
* CAP理论的核心是：一个分布式系统不可能同时很好的满足一致性，可用性和分区容错性这三个需求，最多只能同时较好的满足两个。

因此，根据 CAP 原理将 NoSQL 数据库分成了满足 CA 原则、满足 CP 原则和满足 AP 原则三 大类：

* CA - 单点集群，满足一致性，可用性的系统，通常在可扩展性上不太强大。
* CP - 满足一致性，分区容忍性的系统，通常性能不是特别高。
* AP - 满足可用性，分区容忍性的系统，通常可能对一致性要求低一些。

### NoSQL的优点/缺点

优点:

* 高可扩展性
* 分布式计算
* 低成本
* 架构的灵活性，半结构化数据
* 没有复杂的关系

缺点:

* 没有标准化
* 有限的查询功能（到目前为止）
* 最终一致是不直观的程序

### BASE

BASE：Basically Available, Soft-state, Eventually Consistent。 由 Eric Brewer 定义。
CAP理论的核心是：一个分布式系统不可能同时很好的满足一致性，可用性和分区容错性这三个需求，最多只能同时较好的满足两个。
BASE是NoSQL数据库通常对可用性及一致性的弱要求原则:

* Basically Available --基本可用
* Soft-state --软状态/柔性事务。 "Soft state" 可以理解为"无连接"的, 而 "Hard state" 是"面向连接"的
* Eventually Consistency -- 最终一致性， 也是 ACID 的最终目的。

### MongoDB 数据类型

下表为MongoDB中常用的几种数据类型。

数据类型:描述
String:字符串。存储数据常用的数据类型。在 MongoDB 中，UTF-8 编码的字符串才是合法的。
Integer:整型数值。用于存储数值。根据你所采用的服务器，可分为 32 位或 64 位。
Boolean:布尔值。用于存储布尔值（真/假）。
Double:双精度浮点值。用于存储浮点值。
Min/Max keys:将一个值与 BSON（二进制的 JSON）元素的最低值和最高值相对比。
Array:用于将数组或列表或多个值存储为一个键。
Timestamp:时间戳。记录文档修改或添加的具体时间。
Object:用于内嵌文档。
Null:用于创建空值。
Symbol:符号。该数据类型基本上等同于字符串类型，但不同的是，它一般用于采用特殊符号类型的语言。
Date:日期时间。用 UNIX 时间格式来存储当前日期或时间。你可以指定自己的日期时间：创建 Date 对象，传入年月日信息。
Object ID:对象 ID。用于创建文档的 ID。
Binary Data:二进制数据。用于存储二进制数据。
Code:代码类型。用于在文档中存储 JavaScript 代码。
Regular expression:正则表达式类型。用于存储正则表达式。
